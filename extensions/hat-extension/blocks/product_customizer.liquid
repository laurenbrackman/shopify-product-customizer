{{ 'product_customizer.css' | asset_url | stylesheet_tag }}
<h1>Build a Custom Hat</h1>
<div class="pc-preview" id="pc-preview" aria-hidden="true">
  <button class="pc-preview-close" type="button" aria-label="Close preview">Ã—</button>
  <img id="pc-preview-img" alt="">
</div>

{%- assign coll = block.settings.source_collection -%}
<div id="image-switcher-root" class="pc-grid">
  {%- if coll and coll.products_count > 0 -%}
    {%- for p in coll.products -%}
      {%- if p.featured_image != blank -%}
        <button class="pc-choice"
                data-index="{{ forloop.index }}"
                data-src="{{ p.featured_image | image_url: width: 1600 }}"
                data-handle="{{ p.handle }}">
          <img src="{{ p.featured_image | image_url: width: 320 }}" alt="{{ p.title | escape }}">
        </button>
      {%- endif -%}
    {%- endfor -%}
  {%- endif -%}
</div>

{% schema %}
{
  "name": "Product Customizer",
  "target": "section",
  "templates": ["product"],
  "settings": [
    { "type": "collection", "id": "source_collection", "label": "Collection to display" }
  ]
}
{% endschema %}

{{ 'product_customizer.js' | asset_url | script_tag }}
