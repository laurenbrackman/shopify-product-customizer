{{ 'product_customizer.css' | asset_url | stylesheet_tag }}

<div class="pc-preview" id="pc-preview" aria-hidden="true">
  <button class="pc-preview-close" type="button" aria-label="Close preview">Ã—</button>
  <img id="pc-preview-img" alt="">
</div>

<div id="image-switcher-root" class="pc-grid">
  {%- assign limit = block.settings.max_images | default: 20 -%}
  {%- for hat in collections['hats'].products limit: limit -%}
    <button class="pc-choice" data-index="{{ forloop.index }}" data-src="{{ hat.featured_image | image_url: width: 1600 }}">
      <img src="{{ hat.featured_image | image_url: width: 320 }}" alt="{{ hat.title | escape }}">
    </button>
  {%- endfor -%}
</div>

{% schema %}
{
  "name": "Product Customizer",
  "target": "section",
  "templates": ["product"],
  "settings": [
    { "type": "range", "id": "max_images", "label": "Max hats to show", "min": 1, "max": 50, "step": 1, "default": 20 }
  ]
}
{% endschema %}

{{ 'product_customizer.js' | asset_url | script_tag }}